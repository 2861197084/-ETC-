# ETCç³»ç»ŸåŠŸèƒ½å®æ–½ä»»åŠ¡æ¸…å•

> **æ–‡æ¡£åˆ›å»ºæ—¥æœŸ**: 2025å¹´12æœˆ19æ—¥  
> **çŠ¶æ€è¯´æ˜**: âŒ æœªå®Œæˆ | ğŸ”„ è¿›è¡Œä¸­ | âœ… å·²å®Œæˆ  
> **ä¼˜å…ˆçº§**: P0-ç´§æ€¥ | P1-é«˜ | P2-ä¸­ | P3-ä½

---

## ä¸€ã€Flinkå®æ—¶è®¡ç®—æ¨¡å— (P0)

### 1.1 Flinké¡¹ç›®ç»“æ„åˆ›å»º âŒ
- **ä»»åŠ¡æè¿°**: åˆ›å»º `flink` æ¨¡å—ï¼ŒåŒ…å«æ‰€æœ‰å®æ—¶è®¡ç®—ä½œä¸š
- **æŠ€æœ¯æ ˆ**: Flink 1.18 + Kafka + MySQL + Redis
- **ç›®å½•ç»“æ„**:
```
flink/
â”œâ”€â”€ pom.xml
â”œâ”€â”€ src/main/java/com/etc/flink/
â”‚   â”œâ”€â”€ FlinkJobApplication.java          # ä½œä¸šå¯åŠ¨å…¥å£
â”‚   â”œâ”€â”€ job/
â”‚   â”‚   â”œâ”€â”€ TrafficFlowJob.java           # å®æ—¶è½¦æµé‡ç»Ÿè®¡
â”‚   â”‚   â”œâ”€â”€ RevenueJob.java               # å®æ—¶è¥æ”¶è®¡ç®—
â”‚   â”‚   â”œâ”€â”€ VehicleSourceJob.java         # æœ¬åœ°/å¤–åœ°è½¦è¾†æ¥æºç»Ÿè®¡
â”‚   â”‚   â”œâ”€â”€ CheckpointPressureJob.java    # ç«™å£å‹åŠ›å®æ—¶è®¡ç®—
â”‚   â”‚   â”œâ”€â”€ ViolationDetectJob.java       # è¿ç« å®æ—¶æ£€æµ‹
â”‚   â”‚   â”œâ”€â”€ ClonePlateDetectJob.java      # å¥—ç‰Œè½¦å®æ—¶æ£€æµ‹
â”‚   â”‚   â””â”€â”€ RegionHeatJob.java            # åŒºåŸŸçƒ­åº¦æ’å
â”‚   â”œâ”€â”€ source/
â”‚   â”‚   â””â”€â”€ KafkaSourceFactory.java       # Kafkaæ•°æ®æº
â”‚   â”œâ”€â”€ sink/
â”‚   â”‚   â”œâ”€â”€ MySQLSinkFactory.java         # MySQLè¾“å‡º
â”‚   â”‚   â””â”€â”€ RedisSinkFactory.java         # Rediså®æ—¶ç¼“å­˜
â”‚   â””â”€â”€ model/
â”‚       â”œâ”€â”€ PassRecordEvent.java          # é€šè¡Œè®°å½•äº‹ä»¶
â”‚       â””â”€â”€ AggregatedStats.java          # èšåˆç»Ÿè®¡ç»“æœ
â””â”€â”€ src/main/resources/
    â””â”€â”€ application.yml
```

### 1.2 Flinkä½œä¸šè¯¦ç»†è®¾è®¡

#### 1.2.1 å®æ—¶è½¦æµé‡ç»Ÿè®¡ (TrafficFlowJob) âŒ
- **è¾“å…¥**: Kafka topic `etc-pass-records`
- **å¤„ç†é€»è¾‘**:
  - 5åˆ†é’Ÿæ»šåŠ¨çª—å£ç»Ÿè®¡æ¯ä¸ªå¡å£è½¦æµé‡
  - 1å°æ—¶æ»šåŠ¨çª—å£ç»Ÿè®¡æ¯ä¸ªå¡å£è½¦æµé‡
  - æŒ‰è½¦è¾†ç±»å‹åˆ†ç±»ç»Ÿè®¡
- **è¾“å‡º**:
  - Redis: `realtime:flow:{checkpointId}` (å½“å‰æµé‡)
  - MySQL: `checkpoint_flow` è¡¨ (å°æ—¶çº§èšåˆ)

#### 1.2.2 å®æ—¶è¥æ”¶è®¡ç®— (RevenueJob) âŒ
- **è¾“å…¥**: Kafka topic `etc-pass-records`
- **å¤„ç†é€»è¾‘**:
  - ç´¯è®¡ETCæ‰£è´¹é‡‘é¢
  - æŒ‰å¡å£åˆ†ç»„ç»Ÿè®¡
  - æŒ‰è½¦è¾†ç±»å‹åˆ†ç»„ç»Ÿè®¡
- **è¾“å‡º**:
  - Redis: `realtime:revenue:today` (ä»Šæ—¥æ€»è¥æ”¶)
  - Redis: `realtime:revenue:{checkpointId}` (å¡å£è¥æ”¶)

#### 1.2.3 è½¦è¾†æ¥æºç»Ÿè®¡ (VehicleSourceJob) âŒ
- **è¾“å…¥**: Kafka topic `etc-pass-records`
- **å¤„ç†é€»è¾‘**:
  - æ ¹æ®è½¦ç‰Œå·å‰ç¼€åˆ¤æ–­æœ¬åœ°/å¤–åœ°
  - è‹C* = æœ¬åœ°è½¦è¾†
  - å…¶ä»– = å¤–åœ°è½¦è¾†
  - 5åˆ†é’Ÿæ»šåŠ¨çª—å£ç»Ÿè®¡
- **è¾“å‡º**:
  - Redis: `realtime:source:local` (æœ¬åœ°è½¦è¾†æ•°)
  - Redis: `realtime:source:foreign` (å¤–åœ°è½¦è¾†æ•°)

#### 1.2.4 ç«™å£å‹åŠ›å®æ—¶è®¡ç®— (CheckpointPressureJob) âŒ
- **è¾“å…¥**: Kafka topic `etc-pass-records`
- **å¤„ç†é€»è¾‘**:
  - 5åˆ†é’Ÿæ»šåŠ¨çª—å£è®¡ç®—æ¯ä¸ªå¡å£çš„è½¦æµé‡
  - è®¡ç®—å‹åŠ›æ¯” = å½“å‰æµé‡ / æœ€å¤§å®¹é‡
  - ç”Ÿæˆå‹åŠ›é¢„è­¦ç­‰çº§ (æ­£å¸¸/ç¹å¿™/æ‹¥å µ/ä¸¥é‡)
- **è¾“å‡º**:
  - Redis: `realtime:pressure:{checkpointId}` (å‹åŠ›å€¼)
  - MySQL: è¶…è¿‡é˜ˆå€¼å†™å…¥ `alert` è¡¨

#### 1.2.5 åŒºåŸŸçƒ­åº¦æ’å (RegionHeatJob) âŒ
- **è¾“å…¥**: Kafka topic `etc-pass-records`
- **å¤„ç†é€»è¾‘**:
  - æŒ‰åŒºåŸŸåˆ†ç»„(è‹çš–ç•Œ/è‹é²ç•Œ/è¿äº‘æ¸¯ç•Œ/å®¿è¿ç•Œ)
  - 10åˆ†é’Ÿæ»šåŠ¨çª—å£è®¡ç®—çƒ­åº¦
  - æ’åè®¡ç®—
- **è¾“å‡º**:
  - Redis: `realtime:heat:ranking` (åŒºåŸŸçƒ­åº¦æ’ååˆ—è¡¨)

#### 1.2.6 è¿ç« å®æ—¶æ£€æµ‹ (ViolationDetectJob) âŒ
- **è¾“å…¥**: Kafka topic `etc-pass-records`
- **å¤„ç†é€»è¾‘**:
  - è¶…é€Ÿæ£€æµ‹: speed > 120
  - è¶…è½½æ£€æµ‹: æ ¹æ®è½¦è¾†ç±»å‹åˆ¤æ–­ (éœ€è¦æ–°å¢å­—æ®µ)
  - å…¶ä»–è¿è§„: é€ƒè´¹ã€å†²å¡ç­‰
- **è¾“å‡º**:
  - MySQL: `violation` è¡¨
  - MySQL: `alert` è¡¨

#### 1.2.7 å¥—ç‰Œè½¦å®æ—¶æ£€æµ‹ (ClonePlateDetectJob) âŒ
- **è¾“å…¥**: Kafka topic `etc-pass-records`
- **å¤„ç†é€»è¾‘**:
  - ä½¿ç”¨ Flink State ä¿å­˜æœ€è¿‘10åˆ†é’Ÿçš„è½¦ç‰Œé€šè¡Œè®°å½•
  - åŒä¸€è½¦ç‰ŒçŸ­æ—¶é—´å†…å‡ºç°åœ¨ç›¸è·è¾ƒè¿œçš„ä¸¤ä¸ªå¡å£
  - è®¡ç®—ç†è®ºè¡Œé©¶æ—¶é—´ï¼Œå¯¹æ¯”å®é™…æ—¶é—´å·®
- **è¾“å‡º**:
  - MySQL: `clone_plate_detection` è¡¨
  - MySQL: `alert` è¡¨

---

## äºŒã€åç«¯APIæ¥å£å®Œå–„ (P0)

### 2.1 å®æ—¶ç›‘æ§é¡µé¢æ¥å£

#### 2.1.1 `/admin/realtime/daily-stats` å®Œå–„ âŒ
**å½“å‰çŠ¶æ€**: éƒ¨åˆ†æ•°æ®æ­£ç¡®ï¼ŒavgSpeedæœªå®ç°
**éœ€è¦ä¿®æ”¹**:
```java
// RealtimeService.java
- ä»Redisè·å–ä»Šæ—¥æ€»æµé‡ (Flinkè®¡ç®—)
- ä»Redisè·å–ä»Šæ—¥æ€»è¥æ”¶ (Flinkè®¡ç®—)  
- ä»Redisè®¡ç®—å¹³å‡è½¦é€Ÿ (éœ€æ–°å¢å­—æ®µç»Ÿè®¡)
- ä»Redisè·å–ä»Šæ—¥å‘Šè­¦æ•° (Flinkè®¡ç®—)
```

#### 2.1.2 `/admin/realtime/violations` å®Œå–„ âŒ
**å½“å‰çŠ¶æ€**: è¿”å›çœŸå®æ•°æ®ä½†ç­›é€‰ä¸å·¥ä½œ
**éœ€è¦ä¿®æ”¹**:
```java
// æ”¯æŒçš„æŸ¥è¯¢å‚æ•°:
- type: all | overspeed | overload | illegal
- startTime: å¼€å§‹æ—¶é—´
- endTime: ç»“æŸæ—¶é—´
- status: pending | processed

// RealtimeService.java ä¿®æ”¹:
public List<Map<String, Object>> getViolations(String type, String status, int page, int pageSize) {
    // æ ¹æ® type ç­›é€‰è¿ç« ç±»å‹
    // æ ¹æ® status ç­›é€‰å¤„ç†çŠ¶æ€
}
```

#### 2.1.3 `/admin/realtime/pressure-warnings` å®Œå–„ âŒ
**å½“å‰çŠ¶æ€**: åªæ˜¾ç¤º6ä¸ªï¼Œç”¨éšæœºæ•°æ®
**éœ€è¦ä¿®æ”¹**:
```java
// å¿…é¡»æ˜¾ç¤ºå…¨éƒ¨19ä¸ªå¡å£
// ä»Redisè¯»å–Flinkè®¡ç®—çš„å®æ—¶å‹åŠ›å€¼
// è¿”å›æ ¼å¼:
{
  "id": 1,
  "stationName": "è‹çš–ç•Œ1(104çœé“)",
  "level": "warning",  // normal | warning | danger
  "pressure": 75,      // ç™¾åˆ†æ¯”
  "currentFlow": 450,  // å½“å‰æµé‡
  "predictedFlow": 520, // é¢„æµ‹æµé‡
  "suggestion": "å»ºè®®æªæ–½"
}
```

#### 2.1.4 `/admin/realtime/clone-plates` å®Œå–„ âŒ
**å½“å‰çŠ¶æ€**: è¿”å›çœŸå®æ•°æ®ï¼Œä½†å‰ç«¯è§£ææœ‰é—®é¢˜
**éœ€è¦ç¡®è®¤è¿”å›æ ¼å¼**:
```json
{
  "id": 1,
  "plateNumber": "è‹A12345",
  "checkpoint1": "å¡å£åç§°",
  "time1": "2025-12-19T10:30:00",
  "checkpoint2": "å¡å£åç§°",
  "time2": "2025-12-19T10:35:00",
  "distance": 50.0,
  "calculatedSpeed": 600.0,
  "confidence": 0.95,
  "status": "pending"
}
```

### 2.2 åœ°å›¾å¤§å±æ¥å£

#### 2.2.1 `/admin/map/checkpoints` ä¸­æ–‡ä¹±ç ä¿®å¤ âŒ
**å½“å‰çŠ¶æ€**: è¿”å›ä¸­æ–‡ä¹±ç 
**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥æ•°æ®åº“å­—ç¬¦é›† `SHOW CREATE TABLE checkpoint`
2. æ£€æŸ¥JDBCè¿æ¥å­—ç¬¦ä¸² `characterEncoding=UTF-8`
3. åç«¯å¼ºåˆ¶ä½¿ç”¨ CHECKPOINT_NAME_MAP æ˜ å°„

#### 2.2.2 `/admin/map/vehicle-source` æ–°å¢ âŒ
**æ¥å£æè¿°**: è½¦è¾†æ¥æºç»Ÿè®¡(æœ¬åœ°/å¤–åœ°)
**è¿”å›æ ¼å¼**:
```json
{
  "local": 12500,     // æœ¬åœ°è½¦è¾†(è‹C)
  "foreign": 8700,    // å¤–åœ°è½¦è¾†
  "localRate": 59.0,  // æœ¬åœ°å æ¯”
  "foreignRate": 41.0 // å¤–åœ°å æ¯”
}
```
**æ•°æ®æ¥æº**: Redis (Flinkå®æ—¶è®¡ç®—)

#### 2.2.3 `/admin/map/region-heat` æ–°å¢ âŒ
**æ¥å£æè¿°**: åŒºåŸŸçƒ­åº¦æ’å
**è¿”å›æ ¼å¼**:
```json
[
  { "region": "è‹çš–ç•Œ", "heat": 3500, "rank": 1 },
  { "region": "è‹é²ç•Œ", "heat": 2800, "rank": 2 },
  { "region": "è¿äº‘æ¸¯ç•Œ", "heat": 1500, "rank": 3 },
  { "region": "å®¿è¿ç•Œ", "heat": 2100, "rank": 4 }
]
```
**æ•°æ®æ¥æº**: Redis (Flinkå®æ—¶è®¡ç®—)

#### 2.2.4 `/admin/map/checkpoint-realtime/{id}` æ–°å¢ âŒ
**æ¥å£æè¿°**: å•ä¸ªå¡å£å®æ—¶æ•°æ®
**è¿”å›æ ¼å¼**:
```json
{
  "checkpointId": 1,
  "checkpointName": "è‹çš–ç•Œ1(104çœé“)",
  "currentFlow": 450,
  "todayTotal": 5600,
  "avgSpeed": 85.5,
  "status": "busy",
  "todayRevenue": 28000,
  "localVehicles": 3200,
  "foreignVehicles": 2400
}
```

### 2.3 æŸ¥è¯¢é¡µé¢æ¥å£

#### 2.3.1 è½¦è¾†ç±»å‹ç­›é€‰æ¥å£ âŒ
**å½“å‰çŠ¶æ€**: ä¸‹æ‹‰æ¡†å­˜åœ¨ä½†æŸ¥è¯¢ä¸ç”Ÿæ•ˆ
**éœ€è¦ä¿®æ”¹**:
```java
// AdminQueryController.java
@GetMapping("/records")
public ApiResponse<PageResult<PassRecord>> getRecords(
    @RequestParam(required = false) String plateNumber,
    @RequestParam(required = false) Long checkpointId,
    @RequestParam(required = false) String vehicleType,  // è½¦è¾†ç±»å‹ç­›é€‰
    @RequestParam(required = false) String startTime,
    @RequestParam(required = false) String endTime,
    ...
)
```

### 2.4 ç»Ÿè®¡å›¾è¡¨æ¥å£å®Œå–„

#### 2.4.1 è¥æ”¶ç»Ÿè®¡æ¥å£ `/admin/stats/revenue` âŒ
**éœ€è¦è¿”å›**:
- ä»Šæ—¥è¥æ”¶
- æœ¬å‘¨/æœ¬æœˆè¥æ”¶
- æŒ‰å¡å£åˆ†ç»„è¥æ”¶
- æŒ‰è½¦è¾†ç±»å‹åˆ†ç»„è¥æ”¶

#### 2.4.2 è¿ç« ç»Ÿè®¡æ¥å£ `/admin/stats/violations` âŒ
**éœ€è¦è¿”å›**:
- ä»Šæ—¥/æœ¬å‘¨/æœ¬æœˆè¿ç« æ•°
- æŒ‰ç±»å‹ç»Ÿè®¡(è¶…é€Ÿ/è¶…è½½/è¿è§„)
- æŒ‰å¡å£åˆ†ç»„

#### 2.4.3 å¥—ç‰Œç»Ÿè®¡æ¥å£ `/admin/stats/clone-plates` âŒ
**éœ€è¦è¿”å›**:
- ä»Šæ—¥/æœ¬å‘¨/æœ¬æœˆå¥—ç‰Œæ£€æµ‹æ•°
- å¤„ç†ç‡
- æŒ‰å¡å£åˆ†å¸ƒ

---

## ä¸‰ã€å‰ç«¯é¡µé¢ä¿®æ”¹ (P1)

### 3.1 åœ°å›¾å¤§å± (XuzhouTrafficMap.vue)

#### 3.1.1 ç«™ç‚¹åç§°ä¹±ç ä¿®å¤ âŒ
**å½“å‰çŠ¶æ€**: ç«™ç‚¹æ ‡ç­¾æ˜¾ç¤ºä¹±ç 
**è§£å†³æ–¹æ¡ˆ**: ä½¿ç”¨å‰ç«¯ CHECKPOINT_NAME_MAP è¦†ç›–åç«¯æ•°æ®
```typescript
const CHECKPOINT_NAME_MAP: Record<number, string> = {
  1: 'è‹çš–ç•Œ1(104çœé“)',
  2: 'è‹çš–ç•Œ2(311å›½é“)',
  // ... 19ä¸ª
}
```

#### 3.1.2 è½¦è¾†æ¥æºç»Ÿè®¡ç»„ä»¶ âŒ
**ä½ç½®**: åœ°å›¾å·¦ä¸Šè§’
**æ•°æ®**: è°ƒç”¨ `/admin/map/vehicle-source` æ¥å£
**UI**: é¥¼å›¾æˆ–æ•°å­—æ˜¾ç¤º

#### 3.1.3 åŒºåŸŸçƒ­åº¦æ’åç»„ä»¶ âŒ
**ä½ç½®**: åœ°å›¾å³ä¾§
**æ•°æ®**: è°ƒç”¨ `/admin/map/region-heat` æ¥å£
**UI**: æŸ±çŠ¶å›¾æˆ–æ’è¡Œæ¦œ

#### 3.1.4 ç«™ç‚¹å®æ—¶æ•°æ®å¼¹çª—å®Œå–„ âŒ
**å½“å‰çŠ¶æ€**: æ˜¾ç¤ºåŸºæœ¬ä¿¡æ¯
**éœ€è¦æ·»åŠ **: å®æ—¶æµé‡ã€ä»Šæ—¥é€šè¡Œã€è¥æ”¶ç­‰

### 3.2 å®æ—¶ç›‘æ§é¡µé¢ (realtime/index.vue)

#### 3.2.1 é¡¶éƒ¨ç»Ÿè®¡å¡ç‰‡æ•°æ®è”é€š âŒ
**å½“å‰çŠ¶æ€**: è°ƒç”¨APIä½†æ•°æ®å¯èƒ½ä¸º0
**éœ€è¦ç¡®è®¤**:
- todayTotal: ä»Šæ—¥æ€»æµé‡
- todayRevenue: ä»Šæ—¥æ€»è¥æ”¶  
- avgSpeed: å¹³å‡è½¦é€Ÿ
- alertCount: ä»Šæ—¥å‘Šè­¦

#### 3.2.2 ç«™å£å‹åŠ›é¢„è­¦æ˜¾ç¤º19ä¸ª âŒ
**å½“å‰çŠ¶æ€**: åªæ˜¾ç¤º6ä¸ª
**ä¿®æ”¹ä½ç½®**: loadPressureWarnings å‡½æ•°
```typescript
// åˆ é™¤ .slice(0, 6)
pressureWarnings.value = res.data.map(...)  // æ˜¾ç¤ºå…¨éƒ¨
```

#### 3.2.3 è¿ç¦ä¿¡æ¯ç­›é€‰åŠŸèƒ½ âŒ
**å½“å‰çŠ¶æ€**: ç­›é€‰æŒ‰é’®å­˜åœ¨ä½†ä¸ç”Ÿæ•ˆ
**éœ€è¦ä¿®æ”¹**: 
```typescript
const loadViolations = async () => {
  const res = await getViolations({ 
    type: violationType.value,  // ä¼ é€’ç­›é€‰å‚æ•°
    pageSize: 10 
  })
}
```

### 3.3 æŸ¥è¯¢é¡µé¢ (query/index.vue)

#### 3.3.1 è½¦è¾†ç±»å‹ç­›é€‰è”é€š âŒ
**å½“å‰çŠ¶æ€**: ä¸‹æ‹‰æ¡†å­˜åœ¨ä½†ç­›é€‰ä¸ç”Ÿæ•ˆ
**éœ€è¦ä¿®æ”¹**: å°† vehicleType å‚æ•°ä¼ é€’ç»™åç«¯

---

## å››ã€æ•°æ®åº“è¡¨ç»“æ„å®Œå–„ (P1)

### 4.1 è¿ç« è¡¨ (violation) å­—æ®µç¡®è®¤ âœ…
```sql
- violation_type: overspeed | overload | illegal | escape | ...
- å·²æœ‰å­—æ®µå……è¶³
```

### 4.2 è¶…è½½è¿ç« æ”¯æŒ âŒ
**é—®é¢˜**: pass_record è¡¨ç¼ºå°‘è½¦è¾†è½½é‡ä¿¡æ¯
**è§£å†³æ–¹æ¡ˆ**:
1. æ–°å¢ `weight` å­—æ®µåˆ° pass_record
2. æˆ–è€…åœ¨ violation è¡¨çš„ description ä¸­è®°å½•

### 4.3 Redis Keyè®¾è®¡ âŒ
```
realtime:flow:{checkpointId}         # å¡å£å½“å‰æµé‡
realtime:flow:total                  # æ€»æµé‡
realtime:revenue:today               # ä»Šæ—¥è¥æ”¶
realtime:revenue:{checkpointId}      # å¡å£è¥æ”¶
realtime:source:local                # æœ¬åœ°è½¦è¾†æ•°
realtime:source:foreign              # å¤–åœ°è½¦è¾†æ•°
realtime:pressure:{checkpointId}     # å¡å£å‹åŠ›å€¼
realtime:heat:ranking                # åŒºåŸŸçƒ­åº¦æ’å
realtime:avgspeed                    # å¹³å‡è½¦é€Ÿ
```

---

## äº”ã€ä»»åŠ¡æ‰§è¡Œè®¡åˆ’

### Phase 1: Flinkå®æ—¶è®¡ç®— (é¢„è®¡3å¤©)
1. âŒ åˆ›å»º flink æ¨¡å—éª¨æ¶
2. âŒ å®ç° TrafficFlowJob (è½¦æµç»Ÿè®¡)
3. âŒ å®ç° RevenueJob (è¥æ”¶è®¡ç®—)
4. âŒ å®ç° VehicleSourceJob (æ¥æºç»Ÿè®¡)
5. âŒ å®ç° CheckpointPressureJob (å‹åŠ›è®¡ç®—)
6. âŒ å®ç° RegionHeatJob (åŒºåŸŸçƒ­åº¦)
7. âŒ ä¿®æ”¹ç°æœ‰è¿ç« /å¥—ç‰Œæ£€æµ‹é€»è¾‘æ”¹ä¸ºFlink

### Phase 2: åç«¯APIå®Œå–„ (é¢„è®¡2å¤©)
1. âŒ ä¿®å¤ä¸­æ–‡ä¹±ç é—®é¢˜
2. âŒ å®Œå–„ daily-stats æ¥å£ä»Redisè¯»å–
3. âŒ å®Œå–„ violations æ¥å£æ”¯æŒç­›é€‰
4. âŒ å®Œå–„ pressure-warnings è¿”å›19ä¸ª
5. âŒ æ–°å¢ vehicle-source æ¥å£
6. âŒ æ–°å¢ region-heat æ¥å£
7. âŒ å®Œå–„æŸ¥è¯¢æ¥å£æ”¯æŒè½¦è¾†ç±»å‹

### Phase 3: å‰ç«¯é¡µé¢è”é€š (é¢„è®¡1å¤©)
1. âŒ ä¿®å¤åœ°å›¾ç«™ç‚¹ä¹±ç 
2. âŒ æ·»åŠ è½¦è¾†æ¥æºç»Ÿè®¡ç»„ä»¶
3. âŒ æ·»åŠ åŒºåŸŸçƒ­åº¦æ’åç»„ä»¶
4. âŒ å®æ—¶ç›‘æ§æ˜¾ç¤º19ä¸ªç«™å£
5. âŒ è¿ç¦ä¿¡æ¯ç­›é€‰è”é€š
6. âŒ æŸ¥è¯¢é¡µé¢è½¦è¾†ç±»å‹ç­›é€‰

### Phase 4: é›†æˆæµ‹è¯• (é¢„è®¡1å¤©)
1. âŒ Flinkä½œä¸šä¸Kafkaè”è°ƒ
2. âŒ åç«¯APIéªŒè¯
3. âŒ å‰ç«¯é¡µé¢å…¨åŠŸèƒ½æµ‹è¯•

---

## å…­ã€éªŒæ”¶æ ‡å‡†

### 6.1 Flinkå®æ—¶è®¡ç®—
- [ ] Dockerä¸­Flinkä½œä¸šè¿è¡Œæ­£å¸¸
- [ ] Kafkaæ¶ˆæ¯æ­£ç¡®æ¶ˆè´¹
- [ ] Redisä¸­å®æ—¶æ•°æ®æ›´æ–°
- [ ] MySQLèšåˆæ•°æ®æ­£ç¡®å†™å…¥

### 6.2 åœ°å›¾å¤§å±
- [ ] 19ä¸ªç«™ç‚¹åç§°æ­£ç¡®æ˜¾ç¤ºï¼ˆæ— ä¹±ç ï¼‰
- [ ] è½¦è¾†æ¥æºç»Ÿè®¡å®æ—¶æ›´æ–°
- [ ] åŒºåŸŸçƒ­åº¦æ’åå®æ—¶è®¡ç®—
- [ ] ç‚¹å‡»ç«™ç‚¹æ˜¾ç¤ºå®æ—¶æ•°æ®

### 6.3 å®æ—¶ç›‘æ§
- [ ] ä»Šæ—¥æ€»æµé‡æ˜¾ç¤ºæ­£ç¡®
- [ ] ä»Šæ—¥æ€»è¥æ”¶æ˜¾ç¤ºæ­£ç¡®
- [ ] å¹³å‡è½¦é€Ÿæ˜¾ç¤ºæ­£ç¡®
- [ ] ä»Šæ—¥å‘Šè­¦æ˜¾ç¤ºæ­£ç¡®
- [ ] å¥—ç‰Œè½¦åˆ—è¡¨æ˜¾ç¤ºçœŸå®æ•°æ®
- [ ] ç«™å£å‹åŠ›é¢„è­¦æ˜¾ç¤º19ä¸ª
- [ ] è¿ç¦ä¿¡æ¯ç­›é€‰(å…¨éƒ¨/è¶…é€Ÿ/è¶…è½½/è¿è§„)ç”Ÿæ•ˆ

### 6.4 æŸ¥è¯¢åŠŸèƒ½
- [ ] æ—¶é—´èŒƒå›´ç­›é€‰ç”Ÿæ•ˆ
- [ ] å¡å£ç­›é€‰ç”Ÿæ•ˆ
- [ ] è½¦ç‰Œå·æœç´¢ç”Ÿæ•ˆ
- [ ] è½¦è¾†ç±»å‹ç­›é€‰ç”Ÿæ•ˆ

---

## ä¸ƒã€æŠ€æœ¯å¤‡æ³¨

### 7.1 ç°æœ‰DockeræœåŠ¡
```
MySQL:      localhost:13306 (ä¸»åº“)
            localhost:13307 (ä»åº“)
Redis:      localhost:6379, 6380
ZooKeeper:  localhost:2181, 2182, 2183
Kafka:      localhost:9092
HBase:      localhost:16010
Flink:      localhost:8082 (JobManager UI)
```

### 7.2 Kafka Topic
```
etc-pass-records    # é€šè¡Œè®°å½• (å·²æœ‰æ•°æ®ç”Ÿäº§ä¸­)
etc-alerts          # å‘Šè­¦é€šçŸ¥
```

### 7.3 æ•°æ®ç”Ÿæˆå™¨
```bash
# å†å²æ•°æ®ç”Ÿæˆ (å·²å®Œæˆ)
python data/history_generator.py

# å®æ—¶æ•°æ®ç”Ÿæˆ (è¿è¡Œä¸­)
python data/realtime_generator.py --rate 10 --kafka
```

---

**æ–‡æ¡£ç»´æŠ¤äºº**: GitHub Copilot  
**æœ€åæ›´æ–°**: 2025-12-19
